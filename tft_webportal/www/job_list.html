{% from "frappe/templates/includes/avatar_macro.html" import avatar %}
{% extends "templates/web.html" %}

{% block title %}
	{{ _("Transportation Request") }}
{% endblock %}
{% set show_sidebar = 1 %}
{% set sidebar_columns = 3 %}

{% block page_sidebar %}
<div class="tft-sidebar">
	<div class="sidebar-card">
		<!-- <div class="sidebar-head">{{ _("Quick Links") }}</div> -->
		<a class="sidebar-link" href="/transportation_request">{{ _("Transportation Request") }}</a>
		<a class="sidebar-link active" href="/job_list">{{ _("My Request(s)") }}</a>
		<a class="sidebar-link" href="/me">{{ _("My Account") }}</a>
	</div>
</div>
{% endblock %}

{% set full_width = 1 %}

{% block page_content %}
<section class="tft-jobs">
	<div class="wrap">
		<div class="header">
			<span class="eyebrow">{{ _("Transportation Requests") }}</span>
			<h1>{{ _("My Requests") }}</h1>
			<p class="subhead">{{ _("Track your submitted transportation requests and their current status.") }}</p>
		</div>

		<div class="card stack">
			<div class="card-head">
				<h2>{{ _("Recent Requests") }}</h2>
				<div class="card-actions">
					<button class="btn btn-sm btn-primary load-more" type="button">{{ _("Load more") }}</button>
				</div>
			</div>
			<div class="filters">
				<div class="field">
					<label for="filter_status">{{ _("Status") }}</label>
					<select id="filter_status" name="filter_status">
						<option value="">{{ _("All") }}</option>
						<option value="unassigned">{{ _("Unassigned") }}</option>
						<option value="assigned">{{ _("Assigned") }}</option>
						<option value="completed">{{ _("Completed") }}</option>
					</select>
				</div>
				<div class="field">
					<label for="filter_pickup">{{ _("Pickup address") }}</label>
					<input id="filter_pickup" name="filter_pickup" type="text" placeholder="{{ _('Search pickup') }}" />
				</div>
				<div class="field">
					<label for="filter_delivery">{{ _("Delivery address") }}</label>
					<input id="filter_delivery" name="filter_delivery" type="text" placeholder="{{ _('Search delivery') }}" />
				</div>
			</div>
			<div class="job-table">
				<div class="job-row job-head">
					<div>{{ _("#") }}</div>
					<div>{{ _("Date") }}</div>
					<div>{{ _("Pickup") }}</div>
					<div>{{ _("Delivery") }}</div>
					<div>{{ _("Vehicles") }}</div>
					<div>{{ _("Status") }}</div>
					<div></div>
				</div>
				<!-- Job rows will be dynamically added here -->
				<div class='job-body'>
					{% for c, a in enumerate(jobs, start=1) %}
						<div class="job-row" data-status="{{a.status | lower}}" data-pickup="{{a.from_address}}" data-delivery="{{a.to_address}}">
							<div>{{c}}</div>
							<div>{{a.date}}</div>
							<div>{{a.from_address}}</div>
							<div>{{a.to_address}}</div>
							<div>{{ a.vehicles }}</div>
							<div><span class="status-pill status-{{ a.status | lower }}">{{ a.status }}</span></div>
							<div><a class="row-link btn" href="/transportation_request?request={{a.name}}&view=1">{{ _("View") }}</a></div>
						</div>
					{% else %}
						<div class="job-row">
							<div></div>
							<div></div>
							<div>{{ _("No transportation requests found.") }}</div>
							<div></div>
							<div></div>
							<div></div>
						</div>
					{% endfor %}
				</div>
			</div>
		</div>
	</div>
</section>
{% endblock %}

{% block script %}
	<script>{% include "templates/includes/job_list.js" %}</script>
{% endblock %}
{% block footer %}{% endblock %}