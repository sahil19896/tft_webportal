{% from "frappe/templates/includes/avatar_macro.html" import avatar %}
{% extends "templates/web.html" %}

{% block title %}
	{{ _("Transportation Request") }}
{% endblock %}
{% set show_sidebar = 1 %}
{% set sidebar_columns = 3 %}

{% block page_sidebar %}
<div class="tft-sidebar">
	<div class="sidebar-card">
		<!-- <div class="sidebar-head">{{ _("Quick Links") }}</div> -->
		<a class="sidebar-link active" href="/transportation_request">{{ _("Transportation Request") }}</a>
		<a class="sidebar-link" href="/job_list">{{ _("Transportation Request List") }}</a>
		<a class="sidebar-link" href="/me">{{ _("My Account") }}</a>
	</div>
</div>
{% endblock %}

{% set full_width = 1 %}

{% block page_content %}
<section class="tft-transport">
	<div class="wrap">
		<div class="header">
			<span class="eyebrow">{{ _("Transportation Request") }}</span>
			<h1>{{ _("Confirmation required for receipt of request and delivery") }}</h1>
			<p class="subhead">{{ _("Provide the shipment details below. Our team will confirm pickup and delivery once received.") }}</p>
			<p class="subhead">{{ _("ALCO TRANSPORT") }}, {{_("Email")}}: {{_("info@alcotransport.ca or fax/faxe: 514-494-2255 or Phone: 514-494-9484")}}</p>
		</div>

		<form class="card stack" id="request-form" method="post" action="#">
			<div class="card-grid">
				<div class="section-card">
					<div class="section-head">{{ _("Company / Individual") }}</div>
					<div class="grid-2">
						<div class="field">
							<label for="supplier_email">{{ _("Email / Fax") }}</label>
							<input id="supplier_email" name="supplier_email" type="text" placeholder="{{ _('info@transport.com') }}" required value="{{user_email}}" disabled />
						</div>
						<div class="field">
							<label for="supplier_phone">{{ _("Phone") }}</label>
							<input id="supplier_phone" name="supplier_phone" type="tel" placeholder="{{ _('123-456-7890') }}" required value="{{user_phone or ''}}" />
						</div>
					</div>
					<div class="grid-2">
						<div class="field">
							<label for="po_number">{{ _("P.O. Number") }}</label>
							<input id="po_number" name="po_number" type="text" placeholder="{{ _('PO-123') }}" required />
						</div>
						<div class="field">
							<label for="request_date">{{ _("Date") }}</label>
							<input id="request_date" name="request_date" type="date" value=today() required />
						</div>
					</div>
					<div class="grid-2">
						<div class="field">
							<label for="business_unit">{{ _("Business Unit Name") }}</label>
							<input id="business_unit" name="business_unit" type="text" placeholder="{{ _('Canada') }}" required value="{{business_unit or ''}}" />
						</div>
						<div class="field">
							<label for="contact_name">{{ _("Contact Name") }}</label>
							<input id="contact_name" name="contact_name" type="text" placeholder="{{ _('Charlene') }}" required autocomplete="off" value="{{contact_name or ''}}"/>
						</div>
					</div>
					<div class="grid-2">
						<div class="field">
							<label for="contact_phone">{{ _("Contact Phone") }}</label>
							<input id="contact_phone" name="contact_phone" type="tel" placeholder="{{ _('123-456-7890') }}" required value="{{contact_phone or ''}}" />
						</div>
						<div class="field">
							<label for="contact_email">{{ _("Contact Email") }}</label>
							<input id="contact_email" name="contact_email" type="email" placeholder="{{ _('contact@company.com') }}" value="{{contact_email or ''}}" />
						</div>
					</div>
				</div>

				<div class="section-card">
					<div class="section-head">{{ _("Request Details") }}</div>
					<div class="grid-2">
						<div class="field">
							<label for="pickup_date">{{ _("Available pickup date") }}</label>
							<input id="pickup_date" name="pickup_date" type="date" required />
						</div>
						<div class="field">
							<label for="delivery_date">{{ _("Delivery required by") }}</label>
							<input id="delivery_date" name="delivery_date" type="date" required />
						</div>
					</div>
					<div class="field">
						<label for="notes">{{ _("Notes") }}</label>
						<textarea id="notes" name="notes" rows="5" placeholder="{{ _('Enter additional notes here...') }}"></textarea>
					</div>
				</div>
			</div>

			<!-- <div class="section-card">
				<div class="section-head">{{ _("Address Mode") }}</div>
				<div class="field inline-field">
					<label for="multi_address">{{ _("Multiple pickup/dropoff locations") }}</label>
					<div class="checkbox-wrap">
						<label class="switch">
							<input id="multi_address" name="multi_address" type="checkbox" />
							<span class="slider" aria-hidden="true"></span>
						</label>
						<span>{{ _("Multiple pickup/dropoff locations") }} <br> {{ _("Add more than one From/To address") }}</span>
					</div>
				</div>
			</div> -->

			<div class="card-grid" data-single-address>
				<div class="section-card">
					<div class="section-head">{{ _("From") }}</div>
					<div class="field">
						<label for="from_address">{{ _("Address") }}</label>
						<input type="text" autocomplete="off" id="from_address" 
							class="address-input" name="from_address" list="from_address_list" placeholder="{{ _('1171 Pioneer Rd.') }}" required 
							onchange="update_contact_info(this)" />
						<datalist id="from_address_list">
							{% for address in addresses %}
								<option value="{{ address.name }}" >{{ address.display }}</option>
							{% endfor %}
						</datalist>
					</div>
					<div class="field">
						<label for="from_contact">{{ _("Contact") }}</label>
						<input id="from_contact" name="from_contact" type="text" placeholder="{{ _('123-456-7890') }}" required />
					</div>
					<div class="field">
						<label for="from_company">{{ _("Company") }}</label>
						<input id="from_company" name="from_company" type="text" placeholder="{{ _('Canada') }}" />
					</div>
					<span>{{_("Hours of Operation")}}</span>
					<div class="grid-2">
						<div class="field">
							<label for="from_start_hour">{{ _("Start Working Hours") }}</label>
							<input id="from_start_hour" name="from_start_hour" type="time" placeholder="{{ _('0900') }}" value='08:00'/>
						</div>
						<div class="field">
							<label for="from_end_hour">{{ _("End Working Hours") }}</label>
							<input id="from_end_hour" name="from_end_hour" type="time" placeholder="{{ _('1700') }}" value='17:00' />
						</div>
					</div>
					<div class="field">
						<label for="from_gate">{{ _("Code Gate / Fence / Key Location") }}</label>
						<input id="from_gate" name="from_gate" type="text" placeholder="{{ _('4-2-1-5, Gas cap, driver side floor, lock box') }}" />
					</div>
				</div>

				<div class="section-card">
					<div class="section-head">{{ _("To") }}</div>
					<div class="field">
						<label for="to_address">{{ _("Address") }}</label>
						<input id="to_address" class="address-input" name="to_address" list="to_address_list" type="text" placeholder="{{ _('998 Wilson Ave.') }}" required
						onchange="update_contact_info(this)" />
						<datalist id="to_address_list">
							{% for address in addresses %}
								<option value="{{ address.name }}" >{{ address.display }}</option>
							{% endfor %}
						</datalist>
					</div>
					<div class="field">
						<label for="to_contact">{{ _("Contact") }}</label>
						<input id="to_contact" name="to_contact" type="text" placeholder="{{ _('123-456-7890') }}" required />
					</div>
					<div class="field">
						<label for="to_company">{{ _("Company") }}</label>
						<input id="to_company" name="to_company" type="text" placeholder="{{ _('Canada') }}" />
					</div>
					<span>Hours of Operation</span>
					<div class="grid-2">
						<div class="field">
							<label for="to_start_hour">{{ _("Start Working Hours") }}</label>
							<input id="to_start_hour" name="to_start_hour" type="time" placeholder="{{ _('0900') }}" value='08:00' />
						</div>
						<div class="field">
							<label for="to_end_hour">{{ _("End Working Hours") }}</label>
							<input id="to_end_hour" name="to_end_hour" type="time" placeholder="{{ _('1700') }}" value='17:00' />
						</div>
					</div>
					<div class="field">
						<label for="to_gate">{{ _("Code Gate / Fence / Key Location") }}</label>
						<input id="to_gate" name="to_gate" type="text" placeholder="{{ _('5-3-2-1, Gas cap, driver side floor, lock box') }}" />
					</div>
				</div>
			</div>

			<!-- <div class="section-card is-hidden" data-multi-address>
				<div class="section-head">{{ _("Pickup / Dropoff Addresses") }}</div>
				<div class="table-wrap">
					<table class="transport-table transport-table--addresses">
						<thead>
							<tr>
								<th>{{ _("Type") }}</th>
								<th>{{ _("Company") }}</th>
								<th>{{ _("Address") }}</th>
								<th>{{ _("Contact") }}</th>
								<th>{{ _("Code Gate / Fence") }}</th>
								<th aria-label="{{ _('Remove') }}"></th>
							</tr>
						</thead>
						<tbody id="address-rows">
							<tr>
								<td>
									<select name="addr_type_1">
										<option value="from">{{ _("From") }}</option>
										<option value="to">{{ _("To") }}</option>
									</select>
								</td>
								<td><input name="addr_company_1" type="text" placeholder="{{ _('Bell Canada') }}" /></td>
								<td><input name="addr_address_1" type="text" placeholder="{{ _('1171 Pioneer Rd., Burlington') }}" /></td>
								<td><input name="addr_contact_1" type="text" placeholder="{{ _('Mechanics - 905-335-5701') }}" /></td>
								<td><input name="addr_gate_1" type="text" placeholder="{{ _('4-2-1-5') }}" /></td>
								<td class="row-actions">
									<button type="button" class="row-remove" data-remove-address-row aria-label="{{ _('Remove row') }}">✕</button>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="actions">
					<button class="btn btn-sm secondary" type="button" data-add-address-row>
						{{ _("Add address") }}
					</button>
				</div>
			</div> -->

			<div class="section-card">
				<div class="section-head">{{ _("Vehicle Details") }}</div>
				<div class="table-wrap">
					<table class="transport-table">
						<thead>
							<tr>
								<th>{{ _("Vehicle Number") }}</th>
								<th>{{ _("VIN #") }}</th>
								<th>{{ _("Make / Model") }}</th>
								<th>{{ _("Description") }}</th>
								<th>{{ _("Plate #") }}</th>
								<th>{{ _("Hitch") }}</th>
								<th aria-label="{{ _('Remove') }}"></th>
							</tr>
						</thead>
						<tbody id="vehicle-rows">
							<tr>
								<td>
									<input name="vin_1" list="vin_list" type="text" placeholder="1C3CCBAB5EN125414" onchange="update_vehicle_info(this)" />
									<datalist id="vin_list">
										{% for vehicle in vehicles %}
											<option value="{{ vehicle.vin }}" >{{ vehicle.display }}</option>
										{% endfor %}
									</datalist>
								</td>
								<td><input name="vehicle_number_1" type="text" placeholder="4521909" /></td>
								<td><input name="make_model_1" type="text" placeholder="{{ _('2014 Chrysler 200') }}" /></td>
								<td>
									<input name="description_1" list="description_list" type="text" placeholder="{{ _('Car') }}" />
									<datalist id="description_list">
										{% for type in vehicle_description %}
											<option value="{{ type }}" >{{ type }}</option>
										{% endfor %}
									</datalist>
								</td>
								<td><input name="plate_1" type="text" placeholder="CTET844" /></td>
								<td><select name="hitch_1">
									<option value="No" selected>No</option>
									<option value="Yes">Yes</option>
								</select></td>
								<td class="row-actions">
									<button type="button" class="row-remove" data-remove-row aria-label="{{ _('Remove row') }}">✕</button>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="actions">
					<button class="btn btn-sm secondary" type="button" data-add-vehicle-row>
						{{ _("Add vehicle") }}
					</button>
				</div>
			</div>

			<div class="actions">
				<button class="btn btn-sm btn-primary" type="submit" id="submit_request">{{ _("Submit request") }}</button>
			</div>
		</form>
	</div>
</section>
{% endblock %}

{% block script %}
	<script>{% include "templates/includes/transportation_request.js" %}</script>
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTO_ahca5PuAOs76Lpr40VuBKnHXkLuNI&libraries=places&callback=initAutocomplete" async defer></script>
{% endblock %}
